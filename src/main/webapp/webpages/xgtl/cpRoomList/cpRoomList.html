<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>机房列表</title>

    <link href="../../../3rd-libs/bootstrap/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <!--<link href="../../../css/dataTables.bootstrap.css" rel="stylesheet">-->
    <link href="../../../3rd-libs/datatables/datatables.bootstrap.css" rel="stylesheet">
    <link href="../../../3rd-libs/datatables/datatables.css" rel="stylesheet">
    <link href="../../../css/style2.css" rel="stylesheet">
    <link href="../../../css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="../../../css/animate.css" rel="stylesheet">

    <script src="../../../3rd-libs/jquery/jquery-2.1.4.min.js"></script>
    <script src="../../../3rd-libs/bootstrap/js/bootstrap.min.js"></script>

    <!-- Data Tables -->
    <script src="../../../3rd-libs/datatables/datatables.js"></script>
    <script src="../../../3rd-libs/datatables/datatables.bootstrap.js"></script>
    <script src="../../../3rd-libs/datatables/datatables-custom.js"></script>

    <style>
        .text-align-reverse {
            text-align: right;
        }

        .text-align-reverse > div, .text-align-reverse > select {
            margin-right: 6px;
        }

        .input-group-search {
            display: inline-table;
            width: 150px;
            vertical-align: middle;
        }
    </style>
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="row table-top">
                        <form action="">
                            <div class="col-md-12 text-align-reverse">
                                <div class="input-group-search">
                                    <input name="deviceName" type="text" class="form-control" id="deviceName"
                                           placeholder="设备名称">
                                </div>
                                <div class="input-group-search">
                                    <input name="operDate" type="text" class="form-control" id="fieldName"
                                           placeholder="字段名称">
                                </div>
                                <button class="btn btn-primary" type="button" id="queryBtn">查询</button>
                            </div>
                        </form>
                    </div>
                    <table id="data-table" class="table table-striped table-bordered table-hover dataTables-example"
                           style="width: 100%"></table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var tableObj = $('#data-table');
    var api;
    $(document).ready(function () {

        api = tableObj.DataTable({
            "ajax": {
                "url": "/dcms/src/test/json/cpRoomList.json", //  /serviceRoom/datagrid
                "type": "post",
                "data": function (parms) {
                    parms.deviceName = $('[name="deviceName"]').val();
                    parms.operDate = $('[name="fieldName"]').val();
                },
                "dataSrc": function (json) {

                    return json.data.lists;
                }
            },
            columns: [
                {title: '机房名称', data: 'name'},
                {title: '资源编码', data: 'resourceCode'},
                {title: '机房位置', data: 'position'},
                {title: '机房面积', data: 'area'},
                {title: '操作', data: null}
            ],
            columnDefs: [
                {
                    orderable:false,//禁用排序
                    targets:[4]   //指定的列
                },
                {
                    targets: 4,
                    render: function (a, b, c, d) {
                        console.log(c);
                            return "<i class='fa fa-pencil' title='编辑' onclick=\"editItem('" + c+"')\"'></i>" +
                                    "<i class='fa fa-user' title='添加用户' onclick=\"editItem('" + c+"')\"'></i>" +
                                    "<i class='fa fa-edit' title='修改备注' onclick=\"editItem('" + c+"')\"'></i>" +
                                    "<i class='fa fa-edit' title='修改效果图' onclick=\"editItem('" + c+"')\"'></i>" +
                                    "<i class='fa fa-search' title='查看视图' onclick=\"editItem('" + c+"')\"'></i>" +
                                    "<i class='fa fa-edit' title='3D视图' onclick=\"editItem('" + c+"')\"'></i>" +
                                    "<i class='fa fa-eye' title='维修记录' onclick=\"editItem('" + c+"')\"'></i>";
                    }
                }
            ]

        });

        //初始化表格
        tableObj.on("draw.DT", datatablesMtr.freeTableHeight(tableObj));
    });

    //点击查询
    $("#queryBtn").on("click", function () {
        api.ajax.reload();
    });

    function editItem(info){
        console.log(info);
    }

</script>

</body>
</html>